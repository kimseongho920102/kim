drop table STSMST;
--회원
create table mmMst(
    mmId    VARCHAR2(50),
    mmPwd   VARCHAR2(50) not null,
    mmEmail VARCHAR2(50) not null,
    joinDate date not null,
    llDate  date not null,
    stsCd   number not null,
    outDate date,
    outCds  VARCHAR2(30),
    CONSTRAINT mmMst_pk PRIMARY KEY (mmId),
    CONSTRAINT stsCd_fk FOREIGN KEY(stsCd)
    REFERENCES stsMst(stsCd)
);
-- 회원 상태
create table stsMst(
    stsCd   number,
    stsNm   VARCHAR2(50) not null,
    CONSTRAINT stsMst_pk PRIMARY KEY (stsCd)
);

create table stsDel(
    outCd   number(2),
    outRsn varchar2(50),
    CONSTRAINT stsDel_pk PRIMARY KEY (outCd)
);

-- 리뷰
create table rvDtl(
    rvNo    VARCHAR2(50),
    rvSb    VARCHAR2(50) not null,
    rvCt    VARCHAR2(50),
    mmId    VARCHAR2(50) not null,
    rgtDate date not null,
    delDate date,
    delCds  VARCHAR2(50),
    CONSTRAINT rvDtl_pk PRIMARY KEY(rvNo),
    CONSTRAINT rvNo_fk FOREIGN KEY(mmId)
    REFERENCES mmMst(mmId)
);

--리뷰삭제 이유
create table rvDel(
    outCd   number(2),
    outRsn varchar2(50),
    CONSTRAINT rvDel_pk PRIMARY KEY (outCd)
);

-- 리뷰 사진
create table rvPic(
    rvNo    VARCHAR2(50),
    img1    VARCHAR2(50),
    img2    VARCHAR2(50),
    img3    VARCHAR2(50),
    CONSTRAINT rvPic_pk PRIMARY KEY (rvNo),
    CONSTRAINT rvNo_fk FOREIGN KEY(rvNo)
    REFERENCES rvDtl(rvNo)
);
-- 찜
create table fvLk(
    mmId    VARCHAR2(50) not null,
    fvNo    VARCHAR2(50) not null,
    CONSTRAINT fvLk_pk PRIMARY KEY (mmId, fvNo),
    CONSTRAINT mmId_fk FOREIGN KEY(mmId)
    REFERENCES mmMst(mmId)
);
-- 리뷰작성
create table rvRgt(
    rvNo    VARCHAR2(50),
    mmId    VARCHAR2(50) not null,
    rvDate  date not null,
    fvNo    number(50) not null,
    CONSTRAINT rvRgt_pk PRIMARY KEY (rvNo),
    CONSTRAINT mmId_fk FOREIGN KEY(mmId)
    REFERENCES rvDtl(rvNo)
); 


-- 이벤트 응모
create table evApp(
    mmId    VARCHAR2(50) not null,
    appYN   VARCHAR2(50) not null,
    winYN   VARCHAR2(50) not null,
    CONSTRAINT evApp_pk PRIMARY KEY (mmId)
);